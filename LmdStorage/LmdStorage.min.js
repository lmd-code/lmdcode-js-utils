"use strict";class LmdStorage{constructor(a,b="_map"){this.storeName=a,this.mapKey=b,this.data=this.getStore()}get count(){return void 0===this.data||null===this.data?0:this.data.size}getStore(){return this.mapify(localStorage.getItem(this.storeName))}setStore(){try{localStorage.setItem(this.storeName,this.jsonify(this.data))}catch(a){console.error(a.message)}}getItem(a){return this.data.get(a)}getItems(){return this.mapify(this.jsonify(this.data))}setItem(a,b,c=!1){this.data.set(a,b),c||this.setStore()}setItems(a,b=!1){let c=0;for(const d in a)a.hasOwnProperty(d)&&(this.data.set(d,a[d]),c++);0<c&&!b&&this.setStore()}removeItem(a,b=!1){this.data.delete(a)&&!b&&this.setStore()}removeItems(a,b=!1){let c=0;for(let d=0;d<a.length;d++)this.data.delete(a[d])&&c++;0<c&&!b&&this.setStore()}saveAll(a=null){if(null!==a&&a instanceof Map){this.data.clear();for(const[b,c]of a)this.data.set(b,c)}this.setStore(),this.getStore()}clearAll(){this.data.clear(),localStorage.clear(this.storeName)}jsonify(a){if(a instanceof Map)try{let b=JSON.stringify(a,(a,b)=>b instanceof Map?{[this.mapKey]:Array.from(b.entries())}:b);if(void 0!==b)return b}catch(a){console.error(a.message)}return"{}"}mapify(a){try{let b=JSON.parse(a,(a,b)=>"object"==typeof b&&null!==b&&b.hasOwnProperty(this.mapKey)?new Map(b[this.mapKey]):b);if(b instanceof Map)return b}catch(a){console.error(a.message)}return new Map}}